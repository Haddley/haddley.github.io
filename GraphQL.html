<!DOCTYPE html>
<html  >
<head>
  <!-- Site made with Mobirise Website Builder v5.9.4, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v5.9.4, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/15018162-128x128.png" type="image/x-icon">
  <meta name="description" content="">
  
  
  <title>GraphQL</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons2/mobirise2.css">
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons-bold/mobirise-icons-bold.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Jost:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Jost:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap"></noscript>
  <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css"><link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">

  
  <link href="prism.css" rel="stylesheet" />
<!-- include A-Frame obviously -->
<script src="aframe.min.js"></script>
<!-- include ar.js for A-Frame -->
<script src="aframe-ar.js"></script>



  
</head>
<body>
  
  <section data-bs-version="5.1" class="menu menu3 cid-sqt2o2m2mS" once="menu" id="menu3-da">
    
    <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
        <div class="container">
            <div class="navbar-brand">
                
                <span class="navbar-caption-wrap"><a class="navbar-caption text-black text-primary display-7" href="index.html">Neil Haddley</a></span>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbarSupportedContent" data-bs-target="#navbarSupportedContent" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true"><li class="nav-item"><a class="nav-link link text-black text-primary display-4" href="posts.html">
                            Blog Posts</a></li></ul>
                <div class="icons-menu">
                    <a class="iconfont-wrapper" href="https://www.linkedin.com/in/neil-haddley/" target="_blank">
                        <span class="p-2 mbr-iconfont socicon-linkedin socicon"></span>
                    </a>
                    <a class="iconfont-wrapper" href="https://github.com/haddley" target="_blank">
                        <span class="p-2 mbr-iconfont mbrib-github"></span>
                    </a>
                    <a class="iconfont-wrapper" href="https://www.npmjs.com/~haddley" target="_blank">
                        <span class="p-2 mbr-iconfont socicon-npm socicon"></span>
                    </a>
                    <a class="iconfont-wrapper" href="https://hub.docker.com/u/haddley" target="_blank">
                        <span class="p-2 mbr-iconfont mobi-mbri-delivery mobi-mbri"></span>
                    </a>
                </div>
                
            </div>
        </div>
    </nav>
</section>

<section class="content4 cid-sqt2o2MmK4" id="content4-db">
    
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="title col-md-12 col-lg-10">
                <h3 class="mbr-section-title mbr-fonts-style align-center mb-4 display-2">
                    <strong>GraphQL</strong></h3>
                <h4 class="mbr-section-subtitle align-center mbr-fonts-style mb-4 display-5">GraphQL is a query and manipulation language for APIs.
                </h4>
                
            </div>
        </div>
    </div>
</section>

<section class="image3 cid-sqt2o2Xq1z" id="image3-dc">
    

    

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="image-wrapper">
                    <img src="assets/images/graphql-logo.svg-1200x1200.png" alt="GraphQL">
                    <p class="mbr-description mbr-fonts-style mt-2 align-center display-4"><a rel="nofollow" href="https://github.com/facebook/graphql/blob/master/resources/GraphQL%20Logo.svg"><br>            GraphQL Logo</a>&nbsp;by&nbsp;<a href="https://www.google.com">Facebook</a>&nbsp;is licensed under&nbsp;<a href="http://opensource.org/licenses/bsd-license.php" title="BSD license">BSD<br></a></p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="content5 cid-sqt2o38xCZ" id="content5-dd">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                
                <h4 class="mbr-section-subtitle mbr-fonts-style mb-4 display-5">GraphQL compared to <a href="restapiservice.html" class="text-primary">REST</a></h4>
                <p class="mbr-text mbr-fonts-style display-7">A&nbsp;<a href="restapiservice.html" class="text-primary">REST</a>&nbsp;API client may need to make multiple calls to a REST Service to get all of the data it needs.<br><br>A GraphQL API client may be able to request all of the data it needs in a single call.<br><br>GraphQL supports reading data, mutating data, and subscribing to data (WebSockets).<br></p>
            </div>
        </div>
    </div>
</section>

<section class="content5 cid-sqt2o3ej0B" id="content5-de">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                
                <h4 class="mbr-section-subtitle mbr-fonts-style mb-4 display-5">server.js</h4>
                <p class="mbr-text mbr-fonts-style display-7">We create a package.json file using the npm init command<br><strong>$ npm init -y</strong><br><br>We add the GraphQL dependencies using npm<br><strong>$ npm i express@4.16.4&nbsp;express-graphql@0.7.1 graphql@14.1.1 cors@2.8.5</strong><br></p>
            </div>
        </div>
    </div>
</section>

<section class="image3 cid-squyAoURY8" id="image3-dp">
    

    

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="image-wrapper">
                    <img src="assets/images/screen-shot-2021-03-02-at-10.50.19-pm-1536x940.png" alt="">
                    <p class="mbr-description mbr-fonts-style mt-2 align-center display-4">
                        npm i</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="content5 cid-squyRX32UR" id="content5-dq">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                
                <h4 class="mbr-section-subtitle mbr-fonts-style mb-4 display-5">server.js</h4>
                <p class="mbr-text mbr-fonts-style display-7">Once the dependencies have been added we can create a server.js file.<br></p>
            </div>
        </div>
    </div>
</section>

<section class="content7 cid-sqt2o3snjf" id="content7-df">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10">
                <blockquote>
                <h5 class="mbr-section-title mbr-fonts-style mb-2 display-7"><strong>server.js</strong></h5>
                
                
<pre class="language-javascript"><code><!--   
const express = require('express')
const expressGraphQL = require('express-graphql')
const {
  GraphQLSchema,
  GraphQLObjectType,
  GraphQLString,
  GraphQLList,
  GraphQLInt,
  GraphQLNonNull
} = require('graphql')

const cors=require('cors'); // optional

const app = express()

app.use(cors()) // optional

const authors = [
  { id: 1, name: 'Samer Buna' },
  { id: 2, name: 'Robin Wieruch' },
  { id: 3, name: 'Nader Dabit' },
  { id: 4, name: 'Sebastian Grebe' },
  { id: 5, name: 'Eve Porcello' },
  { id: 6, name: 'Alex Banks' }
]

const books = [
  { id: 1, isbn10: '161729568X', name: 'GraphQL in Action', authorIds: [1] },
  { id: 2, isbn10: '1730853935', name: 'The Road to GraphQL: Your journey to master pragmatic GraphQL in JavaScript with React.js and Node.js', authorIds: [2] },
  { id: 3, isbn10: '1492059897', name: 'Full Stack Serverless: Modern Application Development with React, AWS, and GraphQL', authorIds: [3] },
  { id: 4, isbn10: '1789134528', name: 'Hands-On Full-Stack Web Development with GraphQL and React', authorIds: [4] },
  { id: 5, isbn10: '1492030716', name: 'Learning GraphQL: Declarative Data Fetching for Modern Web Apps', authorIds: [5, 6] },
  { id: 6, isbn10: '1492051721', name: 'Learning React: Modern Patterns for Developing React Apps', authorIds: [5, 6] },
]

const BookType = new GraphQLObjectType({
  name: 'Book',
  description: 'This represents a book written by an author',
  fields: () => ({
    id: { type: GraphQLNonNull(GraphQLInt) },
    name: { type: GraphQLNonNull(GraphQLString) },
    isbn10: { type: GraphQLNonNull(GraphQLString) },
    authorIds: { type: GraphQLNonNull(GraphQLList(GraphQLInt)) },
    authors: {
      type: new GraphQLList(AuthorType),
      resolve: (book) => {
        return authors.filter(author => (book.authorIds.includes(author.id)))
      }
    }
  })
})

const AuthorType = new GraphQLObjectType({
  name: 'Author',
  description: 'This represents an author of a book',
  fields: () => ({
    id: { type: GraphQLNonNull(GraphQLInt) },
    name: { type: GraphQLNonNull(GraphQLString) },
    books: {
      type: new GraphQLList(BookType),
      resolve: (author) => {
        return books.filter(book => (book.authorIds.includes(author.id)))
      }
    }
  })
})

const RootQueryType = new GraphQLObjectType({
  name: 'Query',
  description: 'Root Query',
  fields: () => ({
    book: {
      type: BookType,
      description: 'A Single Book',
      args: {
        id: { type: GraphQLInt }
      },
      resolve: (parent, args) => books.find(book => book.id === args.id)
    },
    books: {
      type: new GraphQLList(BookType),
      description: 'List of All Books',
      resolve: () => books
    },
    authors: {
      type: new GraphQLList(AuthorType),
      description: 'List of All Authors',
      resolve: () => authors
    },
    author: {
      type: AuthorType,
      description: 'A Single Author',
      args: {
        id: { type: GraphQLInt }
      },
      resolve: (parent, args) => authors.find(author => author.id === args.id)
    }
  })
})

const RootMutationType = new GraphQLObjectType({
  name: 'Mutation',
  description: 'Root Mutation',
  fields: () => ({
    addBook: {
      type: BookType,
      description: 'Add a book',
      args: {
        name: { type: GraphQLNonNull(GraphQLString) },
        isbn10: { type: GraphQLNonNull(GraphQLString) },
        authorIds: { type: GraphQLNonNull(GraphQLList(GraphQLInt)) }
      },
      resolve: (parent, args) => {
        const book = { id: books.length + 1, name: args.name, isbn10: args.isbn10, authorIds: args.authorIds }
        books.push(book)
        return book
      }
    },
    addAuthor: {
      type: AuthorType,
      description: 'Add an author',
      args: {
        name: { type: GraphQLNonNull(GraphQLString) }
      },
      resolve: (parent, args) => {
        const author = { id: authors.length + 1, name: args.name }
        authors.push(author)
        return author
      }
    }
  })
})

const schema = new GraphQLSchema({
  query: RootQueryType,
  mutation: RootMutationType
})

app.use('/graphql', expressGraphQL({
  schema: schema,
  graphiql: true
}))
app.listen(5000, () => console.log('Server Running'))
--></code></pre>                
                    
                
                
                </blockquote>
            </div>
        </div>
    </div>
</section>

<section class="content5 cid-sqt2o3VJan" id="content5-dh">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                
                <h4 class="mbr-section-subtitle mbr-fonts-style mb-4 display-5">package.json<br></h4>
                <p class="mbr-text mbr-fonts-style display-7">Now we can update the package.json file and run the GraphQL service.<br><br>"scripts": {<br>&nbsp; "start": "node server.js"<br>  },<br><br></p>
            </div>
        </div>
    </div>
</section>

<section class="content7 cid-squGTFx5k9" id="content7-dv">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10">
                <blockquote>
                <h5 class="mbr-section-title mbr-fonts-style mb-2 display-7"><strong>package.json</strong></h5>
                
<pre class="language-javascript"><code><!--         
{
  "name": "graphql-server",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "start": "node server.js"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/haddleyoffice365/graphql-server.git"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "bugs": {
    "url": "https://github.com/haddleyoffice365/graphql-server/issues"
  },
  "homepage": "https://github.com/haddleyoffice365/graphql-server#readme",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.16.4",
    "express-graphql": "^0.7.1",
    "graphql": "^14.1.1"
  }
}
--></code></pre>

                
                </blockquote>
            </div>
        </div>
    </div>
</section>

<section class="content5 cid-squGI1TF9w" id="content5-du">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                
                <h4 class="mbr-section-subtitle mbr-fonts-style mb-4 display-5">npm start</h4>
                <p class="mbr-text mbr-fonts-style display-7">Use "npm start" to run the GraphQL server.<br><br><strong>$ npm start</strong><br></p>
            </div>
        </div>
    </div>
</section>

<section class="image3 cid-sqt2o4eghO" id="image3-dj">
    

    

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="image-wrapper">
                    <img src="assets/images/screen-shot-2021-03-02-at-10.55.09-pm-1536x778.png" alt="">
                    <p class="mbr-description mbr-fonts-style mt-2 align-center display-4">
                        Reading books and related author details</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="image3 cid-squEM4tvHY" id="image3-dr">
    

    

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="image-wrapper">
                    <img src="assets/images/screen-shot-2021-03-02-at-10.57.26-pm-1536x782.png" alt="">
                    <p class="mbr-description mbr-fonts-style mt-2 align-center display-4">
                        Reading data for a single author</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="image3 cid-squFyn14mP" id="image3-ds">
    

    

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="image-wrapper">
                    <img src="assets/images/screen-shot-2021-03-02-at-11.00.26-pm-1536x780.png" alt="">
                    <p class="mbr-description mbr-fonts-style mt-2 align-center display-4">
                        Mutating data. Adding an author</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="image3 cid-squGkoPkbd" id="image3-dt">
    

    

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="image-wrapper">
                    <img src="assets/images/screen-shot-2021-03-02-at-11.03.34-pm-1536x785.png" alt="">
                    <p class="mbr-description mbr-fonts-style mt-2 align-center display-4">
                        Mutating data. Adding a book</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="content5 cid-squImupx0w" id="content5-dw">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                
                <h4 class="mbr-section-subtitle mbr-fonts-style mb-4 display-5">A GraphQL client app</h4>
                <p class="mbr-text mbr-fonts-style display-7">It is possible to use react and apollo to create a GraphQL client app.<br><br>We create a package.json file using the npm init command<br><strong>$ npm init -y</strong><br><br>We add the GraphQL and Apollo dependencies using npm<br><strong>$ npm i apollo-boost@0.4.9 graphql@15.4.0 react@17.0.1 react-apollo@3.1.5 react-dom@17.0.1 react-scripts@4.0.1</strong><br><br>The app.js code includes a GraphQL query, an ApolloProvider and a Query.</p>
            </div>
        </div>
    </div>
</section>

<section class="content7 cid-squR0G9KdC" id="content7-dx">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10">
                <blockquote>
                <h5 class="mbr-section-title mbr-fonts-style mb-2 display-7"><strong>app.js</strong></h5>
                
<pre class="language-javascript"><code><!--         
import ApolloClient from 'apollo-boost';
import { ApolloProvider, Query } from 'react-apollo';
import gql from 'graphql-tag';

const client = new ApolloClient({
  uri: 'http://localhost:5000/graphql'
})

const query = gql`
query booksQuery {
  books {
    id,
    name,
    authors
    {
      name
    }
  }
}
`

function App() {

  return (

    <ApolloProvider client={client}>

      <div>

        <Query query={query}>
          {
            ({ loading, error, data }) => {
              if (loading) return <h4>Loading...</h4>
              if (error) console.log({ error })
              return data.books.map(book =>
                <>
                  <h3 key={book.id}>{book.name}</h3>
                  {book.authors.map(author =>
                    <h4>{author.name}</h4>)}
                </>
              )
            }
          }
        </Query>

      </div>

    </ApolloProvider>

  );
}

export default App;
--></code></pre>
    
                </blockquote>
            </div>
        </div>
    </div>
</section>

<section class="image3 cid-squSAwqODX" id="image3-dy">
    

    

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="image-wrapper">
                    <img src="assets/images/screen-shot-2021-03-02-at-11.52.18-pm-1536x884.png" alt="">
                    <p class="mbr-description mbr-fonts-style mt-2 align-center display-4">
                        localhost:3000</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="content5 cid-sqwYQ7rYR4" id="content5-el">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                
                <h4 class="mbr-section-subtitle mbr-fonts-style mb-4 display-5">API Gateway</h4>
                <p class="mbr-text mbr-fonts-style display-7">Notice that the Cross-Origin Resource Sharing (CORS) library reference in the GraphQL code above is not needed when the GraphQL server and the GraphQL client App are published using an <a href="apigateway.html" class="text-primary">API Gateway</a>.<br><br></p>
            </div>
        </div>
    </div>
</section>

<section class="content12 cid-sqCPKBp2NL" id="content12-fd">
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 col-lg-10">
                <div class="mbr-section-btn align-center"><a class="btn btn-primary display-4" href="https://hub.docker.com/r/haddley/graphql-server" target="_blank">Docker Hub</a></div>
            </div>
        </div>
    </div>
</section><section class="display-7" style="padding: 0;align-items: center;justify-content: center;flex-wrap: wrap;    align-content: center;display: flex;position: relative;height: 4rem;"><a href="https://mobiri.se/2350277" style="flex: 1 1;height: 4rem;position: absolute;width: 100%;z-index: 1;"><img alt="" style="height: 4rem;" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="></a><p style="margin: 0;text-align: center;" class="display-7">&#8204;</p><a style="z-index:1" href="https://mobirise.com/builder/html-code-generator.html">HTML Code Generator</a></section><script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>  <script src="assets/smoothscroll/smooth-scroll.js"></script>  <script src="assets/ytplayer/index.js"></script>  <script src="assets/dropdown/js/navbar-dropdown.js"></script>  <script src="assets/theme/js/script.js"></script>  
  <script src="prism.js"></script>
<script src="webcomponents/howtoTooltip.js"></script>
  
</body>
</html>